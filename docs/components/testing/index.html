<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Gatsby 2.21.30"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link as="script" rel="preload" href="/x-dash/app-0df26440decc2b598a97.js"/><link as="script" rel="preload" href="/x-dash/component---src-templates-documentation-page-jsx-9f7c2cb2cecfcd13b957.js"/><link as="script" rel="preload" href="/x-dash/commons-8cb2fa06fbb6beeecf6a.js"/><link as="script" rel="preload" href="/x-dash/framework-b0cfc954523c69df53a1.js"/><link as="script" rel="preload" href="/x-dash/webpack-runtime-a66609c2347100cb6fc0.js"/><link as="fetch" rel="preload" href="/x-dash/page-data/docs/components/testing/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/x-dash/page-data/app-data.json" crossorigin="anonymous"/><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/><script src="https://cdn.polyfill.io/v2/polyfill.min.js"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700"/><link rel="stylesheet" href="/x-dash/main.css"/><link rel="stylesheet" href="/x-dash/prism.css"/><link rel="icon" href="/favicon.ico"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="basic-layout"><div class="basic-layout__header"><header class="site-header"><div class="site-header__masthead"><a href="/x-dash/">x-dash</a></div><img class="site-header__logo" src="/x-dash/logo.png" alt=""/><nav role="navigation" class="site-header__menu"><a href="/x-dash/docs">Docs</a><a href="/x-dash/components">Components</a><a href="/x-dash/packages">Packages</a></nav></header></div><div class="basic-layout__content"><div class="content-layout"><main class="content-layout__main" role="main"><div class="content-layout__main-inner"><div class="markdown"><h1 id="testing-components" style="position:relative;"><a href="#testing-components" aria-label="testing components permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testing components</h1>
<p>Defining <a href="/x-dash/docs/components/stories">stories</a> from your components, as well as including them in Storybook, will generate Jest snapshot tests for each story. Your stories should include as many of your component's use cases as possible, so that they're covered by the tests.</p>
<p>Snapshot tests are useful for ensuring that you don't accidentally change the markup that your component outputs, which may inadvertently break the apps consuming your component. They don't cover any kind of interactive behaviour or changing state. For components using <code class="language-text">x-interaction</code>, you should consider adding test cases for the interactivity.</p>
<h2 id="interactive-components" style="position:relative;"><a href="#interactive-components" aria-label="interactive components permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Interactive components</h2>
<p>x-dash comes with Jest and Enzyme pre-configured, to help save boilerplate and setup when testing your component.</p>
<p>For an example of Jest and Enzyme in use, and standard patterns for writing tests for a component, see the <a href="https://github.com/Financial-Times/x-dash/tree/master/components/x-increment/__tests__" target="_blank" rel="nofollow noopener noreferrer">x-increment tests</a>.</p>
<h3 id="setup" style="position:relative;"><a href="#setup" aria-label="setup permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setup</h3>
<p>Install <code class="language-text">x-test-utils</code> as a <code class="language-text">devDependency</code> of your component:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm install --save-dev ../../packages/x-test-utils</code></pre></div>
<p>This module exports a version of Enzyme pre-configured to work with Jest and the version of React in use. Create a folder called <code class="language-text">__tests__</code> in your component's folder. Test files should be placed in this folder, using the filename extension <code class="language-text">.test.jsx</code>. It's up to you how to structure your tests; for simple tests we recommend a single file named after your component, e.g. <code class="language-text">x-increment.test.jsx</code>.</p>
<p>The standard pattern for testing an interactive component is rendering it using Enzyme's <code class="language-text">mount</code> DOM renderer, using its selector functions to select an element that would trigger an action, and directly calling the event that calls the action. <code class="language-text">x-interaction</code> actions return a promise that resolves once the state changes have taken place, so you should <code class="language-text">await</code> this promise, then use Jest's <code class="language-text">expect</code> to assert that the DOM changes you expect have take place.</p>
<p>For example, the following is an annotated excerpt from <code class="language-text">x-increment</code>'s tests:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token punctuation">{</span> h <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@financial-times/x-engine'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> mount <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@financial-times/x-test-utils/enzyme'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> Increment <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'x-increment'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
	<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should increment when clicked'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
		<span class="token comment">// render the component with the DOM renderer</span>
		<span class="token keyword">const</span> subject <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Increment</span></span> <span class="token attr-name">count</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// find the button that triggers the increment, and call its `onClick` event. `await` state updates</span>
		<span class="token keyword">await</span> subject<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'onClick'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// has the number in the text incremented?</span>
		<span class="token function">expect</span><span class="token punctuation">(</span>subject<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div></div></main><div class="content-layout__tertiary"><div class="content-layout__tertiary-inner"><div class="tertiary-menu"><p class="tertiary-menu__heading">On this page:</p><ul class="tertiary-menu__list"><li class="tertiary-menu__item" style="padding-left:0em"><a href="#interactive-components">Interactive components</a></li><li class="tertiary-menu__item" style="padding-left:1em"><a href="#setup">Setup</a></li></ul></div></div></div></div></div><div class="basic-layout__sidebar"><div class="site-sidebar"><ul class="site-sidebar__list"><li class="site-sidebar__item site-sidebar__item--heading">Get started</li><li class="site-sidebar__item"><a href="/x-dash/docs/get-started/what-is-x-dash">What is x-dash?</a></li><li class="site-sidebar__item"><a href="/x-dash/docs/get-started/installation">Installation</a></li><li class="site-sidebar__item"><a href="/x-dash/docs/get-started/working-with-x-dash">Working with x-dash</a></li><li class="site-sidebar__item site-sidebar__item--heading">Components in-depth</li><li class="site-sidebar__item"><a href="/x-dash/docs/components/overview">Overview</a></li><li class="site-sidebar__item"><a href="/x-dash/docs/components/creation">Creating components</a></li><li class="site-sidebar__item"><a href="/x-dash/docs/components/javascript">JavaScript</a></li><li class="site-sidebar__item"><a href="/x-dash/docs/components/styling">Styling</a></li><li class="site-sidebar__item"><a href="/x-dash/docs/components/stories">Stories</a></li><li class="site-sidebar__item"><a href="/x-dash/docs/components/interactions">Interactions</a></li><li class="site-sidebar__item"><a aria-current="page" class="is-active" href="/x-dash/docs/components/testing">Testing</a></li><li class="site-sidebar__item site-sidebar__item--heading">Integrating x-dash</li><li class="site-sidebar__item"><a href="/x-dash/docs/integration/using-components">Using components</a></li><li class="site-sidebar__item"><a href="/x-dash/docs/integration/local-development">Local development</a></li><li class="site-sidebar__item site-sidebar__item--heading">Guides</li><li class="site-sidebar__item"><a href="/x-dash/docs/guides/migrating-to-x-teaser">Migrating to x-teaser</a></li></ul></div></div><div class="basic-layout__footer"><footer class="site-footer" role="contentinfo"><div class="site-footer__legal-links"><a href="http://help.ft.com/help/legal-privacy/cookies/" rel="noopener noreferrer" target="_blank">Cookies</a><a href="http://help.ft.com/help/legal-privacy/copyright/copyright-policy/" rel="noopener noreferrer" target="_blank">Copyright</a><a href="http://help.ft.com/help/legal-privacy/privacy/" rel="noopener noreferrer" target="_blank">Privacy</a><a href="http://help.ft.com/help/legal-privacy/terms-conditions" rel="noopener noreferrer" target="_blank">Terms &amp; Conditions</a></div><div class="site-footer__related-links"><a href="https://github.com/financial-times/x-dash" rel="noopener noreferrer" target="_blank">x-dash on GitHub</a><a href="https://slack.com/messages/x/" rel="noopener noreferrer" target="_blank">x-dash on Slack</a></div><p class="site-footer__small-print"><small>© THE FINANCIAL TIMES LTD 2018. FT and &#x27;Financial Times&#x27; are trademarks of The Financial Times Ltd</small></p></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/docs/components/testing";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-0df26440decc2b598a97.js"],"component---src-pages-components-jsx":["/component---src-pages-components-jsx-fe1e6dc18775777c4dc3.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx-ee2c0dd0dcfaac9a6f41.js"],"component---src-pages-packages-jsx":["/component---src-pages-packages-jsx-9918e24fc76319557a33.js"],"component---src-templates-documentation-page-jsx":["/component---src-templates-documentation-page-jsx-9f7c2cb2cecfcd13b957.js"],"component---src-templates-npm-package-jsx":["/component---src-templates-npm-package-jsx-1088e29e9411938464e9.js"]};/*]]>*/</script><script src="/x-dash/webpack-runtime-a66609c2347100cb6fc0.js" async=""></script><script src="/x-dash/framework-b0cfc954523c69df53a1.js" async=""></script><script src="/x-dash/commons-8cb2fa06fbb6beeecf6a.js" async=""></script><script src="/x-dash/component---src-templates-documentation-page-jsx-9f7c2cb2cecfcd13b957.js" async=""></script><script src="/x-dash/app-0df26440decc2b598a97.js" async=""></script></body></html>