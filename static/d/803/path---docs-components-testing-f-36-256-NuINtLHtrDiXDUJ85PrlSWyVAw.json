{"data":{"markdown":{"html":"<h1 id=\"testing-components\"><a href=\"#testing-components\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Testing components</h1>\n<p>Defining <a href=\"../setup/#writing-tests--demos\">stories</a> from your components, as well as including them in Storybook, will generate Jest snapshot tests for each story. Your stories should include as many of your component's use cases as possible, so that they're covered by the tests.</p>\n<p>Snapshot tests are useful for ensuring that you don't accidentally change the markup that your component outputs, which may inadvertently break the apps consuming your component. They don't cover any kind of interactive behaviour or changing state. For components using <code class=\"language-text\">x-interaction</code>, you should consider adding test cases for the interactivity.</p>\n<h2 id=\"interactive-components\"><a href=\"#interactive-components\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Interactive components</h2>\n<p>x-dash comes with Jest and Enzyme pre-configured, to help save boilerplate and setup when testing your component.</p>\n<p>For an example of Jest and Enzyme in use, and standard patterns for writing tests for a component, see the <a href=\"https://github.com/Financial-Times/x-dash/tree/master/components/x-increment/__tests__\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">x-increment tests</a>.</p>\n<h3 id=\"setup\"><a href=\"#setup\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup</h3>\n<p>Install <code class=\"language-text\">x-test-utils</code> as a <code class=\"language-text\">devDependency</code> of your component:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">npm install --save-dev ../../packages/x-test-utils</code></pre>\n      </div>\n<p>This module exports a version of Enzyme pre-configured to work with Jest and the version of React in use. Create a folder called <code class=\"language-text\">__tests__</code> in your component's folder. Test files should be placed in this folder, using the filename extension <code class=\"language-text\">.test.jsx</code>. It's up to you how to structure your tests; for simple tests we recommend a single file named after your component, e.g. <code class=\"language-text\">x-increment.test.jsx</code>.</p>\n<p>The standard pattern for testing an interactive component is rendering it using Enzyme's <code class=\"language-text\">mount</code> DOM renderer, using its selector functions to select an element that would trigger an action, and directly calling the event that calls the action. <code class=\"language-text\">x-interaction</code> actions return a promise that resolves once the state changes have taken place, so you should <code class=\"language-text\">await</code> this promise, then use Jest's <code class=\"language-text\">expect</code> to assert that the DOM changes you expect have take place.</p>\n<p>For example, the following is an annotated excerpt from <code class=\"language-text\">x-increment</code>'s tests:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\">\n      <pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> h <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@financial-times/x-engine'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> mount <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@financial-times/x-test-utils/enzyme'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> Increment <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x-increment'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should increment when clicked'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// render the component with the DOM renderer</span>\n\t\t<span class=\"token keyword\">const</span> subject <span class=\"token operator\">=</span> <span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Increment</span> <span class=\"token attr-name\">count</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token comment\">// find the button that triggers the increment, and call its `onClick` event. `await` state updates</span>\n\t\t<span class=\"token keyword\">await</span> subject<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">prop</span><span class=\"token punctuation\">(</span><span class=\"token string\">'onClick'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token comment\">// has the number in the text incremented?</span>\n\t\t<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>subject<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'span'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>","headings":[{"value":"Testing components","depth":1},{"value":"Interactive components","depth":2},{"value":"Setup","depth":3}]},"menu":{"edges":[{"node":{"title":"Get started","items":[{"title":"What is x-dash?","link":"/docs/get-started/what-is-x-dash"},{"title":"Installation","link":"/docs/get-started/installation"},{"title":"Working with x-dash","link":"/docs/get-started/working-with-x-dash"}]}},{"node":{"title":"Components in-depth","items":[{"title":"Overview","link":"/docs/components/overview"},{"title":"Creating components","link":"/docs/components/creation"},{"title":"JavaScript","link":"/docs/components/javascript"},{"title":"Styling","link":"/docs/components/styling"},{"title":"Stories","link":"/docs/components/stories"},{"title":"Interactions","link":"/docs/components/interactions"},{"title":"Testing","link":"/docs/components/testing"}]}},{"node":{"title":"Integrating x-dash","items":[{"title":"Using components","link":"/docs/integration/using-components"},{"title":"Local development","link":"/docs/integration/local-development"}]}},{"node":{"title":"Guides","items":[{"title":"Migrating to x-teaser","link":"/docs/guides/migrating-to-x-teaser"}]}}]}},"pageContext":{"type":"documentation-page","source":"docs","title":"Testing components"}}