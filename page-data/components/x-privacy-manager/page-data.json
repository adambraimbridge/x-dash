{"componentChunkName":"component---src-templates-npm-package-jsx","path":"/components/x-privacy-manager","result":{"data":{"npm":{"manifest":{"name":"@financial-times/x-privacy-manager","version":"0.1.0","description":"A component to let users give or withhold consent to the use of their data","author":"Oliver Turner <oliver.turner@ft.com>","license":"ISC","keywords":["x-dash"],"main":"dist/privacy-manager.cjs.js","module":"dist/privacy-manager.esm.js","browser":"dist/privacy-manager.es5.js","style":"dist/privacy-manager.css","repository":{"type":"git","url":"https://github.com/Financial-Times/x-dash.git"},"homepage":"https://github.com/Financial-Times/x-dash/tree/master/components/x-privacy-manager","engines":{"node":"10.x"},"publishConfig":{"access":"public"},"dependencies":{"@financial-times/x-engine":"file:../../packages/x-engine","@financial-times/x-interaction":"file:../x-interaction","classnames":"2.2.6"},"devDependencies":{"@financial-times/x-rollup":"file:../../packages/x-rollup","@financial-times/x-test-utils":"file:../../packages/x-test-utils","bower":"1.8.8","fetch-mock-jest":"1.3.0","sass":"1.26.5"},"scripts":{"prepare":"bower install && npm run build","build":"node rollup.js","start":"node rollup.js --watch"}}},"markdown":{"html":"<h1 id=\"x-privacy-manager\" style=\"position:relative;\"><a href=\"#x-privacy-manager\" aria-label=\"x privacy manager permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>x-privacy-manager</h1>\n<p>This module creates an interface giving users the ability to give or withhold consent to the sale of their data under the provisions of the CCPA (California Consumer Protection Act), as a first step towards the FT's journey towards a Unified Privacy solution.</p>\n<p>It is rendered with Page Kit on FT.com at <a href=\"https://www.ft.com/preferences/privacy-ccpa\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.ft.com/preferences/privacy-ccpa</a> as part of <a href=\"https://github.com/Financial-Times/next-control-centre\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">next-control-centre</code></a> and rendered directly by the FT App. Additionally, it is intended to be embedded on pages curated by Specialist Titles</p>\n<p><img src=\"docs/ccpa.png\" alt=\"Privacy Manager UI\"></p>\n<h2 id=\"installation\" style=\"position:relative;\"><a href=\"#installation\" aria-label=\"installation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Installation</h2>\n<p>This module is compatible with Node 10.x and is distributed on npm.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save @financial-times/x-privacy-manager</code></pre></div>\n<p>The <a href=\"https://github.com/Financial-Times/x-dash/tree/master/packages/x-engine\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">x-engine</code></a> module is used to inject your chosen runtime into the component. Please read the <code class=\"language-text\">x-engine</code> documentation first if you are consuming <code class=\"language-text\">x-</code> components for the first time in your application.</p>\n<h2 id=\"usage\" style=\"position:relative;\"><a href=\"#usage\" aria-label=\"usage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usage</h2>\n<h3 id=\"properties\" style=\"position:relative;\"><a href=\"#properties\" aria-label=\"properties permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Properties</h3>\n<table>\n<thead>\n<tr>\n<th>Feature</th>\n<th>Type</th>\n<th>Notes</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">consentSource</code></td>\n<td>string</td>\n<td>Name of the consuming app to be included in requests to Consent Proxy (e.g. \"next-control-centre\")</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">consentProxyEndpoints</code></td>\n<td>object</td>\n<td>Dictionary containing already-formed Consent Proxy Endpoints to use (including userId). It must include, at least, <code class=\"language-text\">consentProxyEndpoints.createOrUpdateRecord</code></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">consent</code></td>\n<td>boolean</td>\n<td>(optional) Any existing preference expressed by the user</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">referrer</code></td>\n<td>string</td>\n<td>(optional) Used to provide a link back to the referring app's home page</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">legislation</code></td>\n<td>string[]</td>\n<td>(optional) An array of the applicable legislation IDs</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">onConsentSavedCallbacks</code></td>\n<td>function[]</td>\n<td>(optional) An array of callbacks to invoken after a successful request to Consent Proxy</td>\n</tr>\n</tbody>\n</table>\n<p>A callback registered with <code class=\"language-text\">onConsentSavedCallbacks</code> will be executed with the following signature:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">customCallback</span><span class=\"token punctuation\">(</span>\n  err<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">|</span> Error<span class=\"token punctuation\">,</span> \n  <span class=\"token punctuation\">{</span>\n    consent<span class=\"token operator\">:</span> boolean<span class=\"token punctuation\">,</span>\n    payload<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      formOfWordsId<span class=\"token operator\">:</span> string<span class=\"token punctuation\">,</span>\n      consentSource<span class=\"token operator\">:</span> string<span class=\"token punctuation\">,</span>\n      data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token punctuation\">[</span><span class=\"token string\">'behaviouralAds'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'demographicAds'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'programmaticAds'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          onsite<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            status<span class=\"token operator\">:</span> boolean<span class=\"token punctuation\">;</span>\n            lbi<span class=\"token operator\">:</span> boolean<span class=\"token punctuation\">;</span>\n            source<span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n            fow<span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Callbacks are executed on regardless of the success (200 status) or failure of the call to the server,\nso we encourage returning early if the value of the error is anything but <code class=\"language-text\">null</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">setCookie</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>consent<span class=\"token punctuation\">,</span> payload<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Store the value of `consent`</span>\n  <span class=\"token keyword\">const</span> uspString <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">1Y</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>consent <span class=\"token operator\">?</span> <span class=\"token string\">\"N\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"Y\"</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">N</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>cookie <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">usprivacy=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>uspString<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">; max-age=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">24</span> <span class=\"token operator\">*</span> <span class=\"token number\">365</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","headings":[{"value":"x-privacy-manager","depth":1},{"value":"Installation","depth":2},{"value":"Usage","depth":2},{"value":"Properties","depth":3}]},"modules":{"edges":[{"node":{"path":"/components/x-follow-button","context":{"title":"x-follow-button"}}},{"node":{"path":"/components/x-gift-article","context":{"title":"x-gift-article"}}},{"node":{"path":"/components/x-interaction","context":{"title":"x-interaction"}}},{"node":{"path":"/components/x-podcast-launchers","context":{"title":"x-podcast-launchers"}}},{"node":{"path":"/components/x-privacy-manager","context":{"title":"x-privacy-manager"}}},{"node":{"path":"/components/x-teaser","context":{"title":"x-teaser"}}},{"node":{"path":"/components/x-teaser-timeline","context":{"title":"x-teaser-timeline"}}}]}},"pageContext":{"type":"npm-package-components","title":"x-privacy-manager","source":"components","packageName":"@financial-times/x-privacy-manager","packageDescription":"A component to let users give or withhold consent to the use of their data","storybook":true,"packagePath":"/components/x-privacy-manager/package","readmePath":"/components/x-privacy-manager/readme"}}}